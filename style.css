/* ============================================================
   TABLE OF CONTENTS
   ============================================================
   1.  RESET & THEME
   2.  BACKGROUND - GRID FLOOR (3D Perspective)
   3.  CRT SCANLINES
   4.  LAYOUT
   5.  SIDEBAR
       5.1  Sidebar Animation (neon-flicker)
       5.2  Logo Area
       5.3  Menu Items
       5.4  Wallet Info
   6.  MAIN CONTENT
   7.  FILTER BUTTONS
   8.  CARDS & GRID
       8.1  Card Rarity Styles (Common / Rare / Legend)
       8.2  Card Animations & Effects (Tilt, Shine, Glow)
       8.3  Card Image Container
       8.4  Card Link & ID
   9.  BUTTONS (Common UI)
       9.1  Base Button
       9.2  Button Variants (connect / approve / spin / burn)
       9.3  Button Effects (Click, Shine, Shake)
       9.4  Disabled State
   10. LOADING OVERLAY (Pacman Loader)
   11. MODAL (Burn Confirm Dialog)
   12. LOCK BUTTON
   13. CARD PREVIEW MODAL
   14. GACHA REVEAL EFFECT
   15. COLLECTION PROGRESS
   16. SEARCH & SORT UI
   17. HISTORY SYSTEM
   18. QUICK INVENTORY SUMMARY
   19. REVEAL DETAILS & ACTIONS
   20. STARS BACKGROUND
   21. TICKER (Marquee Bar)
   22. SCROLLBAR
   23. RESPONSIVE (Mobile)
   ============================================================ */

/* ============================================================
   1. RESET & THEME
   ============================================================ */
* {
  box-sizing: border-box;
}
body {
  font-family: "Rajdhani", sans-serif;
  color: white;
  margin: 0;
  padding: 0;
  height: 100vh;
  overflow: hidden;
  background-color: #0b0a14;
  background-image: radial-gradient(circle at 50% 10%, #2a1b3d 0%, #0b0a14 60%);
  position: relative;
}

/* ============================================================
   2. BACKGROUND - GRID FLOOR (3D Perspective)
   ============================================================ */
body::after {
  content: "";
  position: absolute;
  bottom: -20%; /* ดึงลงมาหน่อยเพื่อให้ Grid ดูเหมือนพื้น */
  left: -50%;
  width: 200%;
  height: 60vh;
  background-image: 
    /* เส้นตั้ง (Vertical) */
    linear-gradient(90deg, rgba(239, 72, 153, 0.3) 1px, transparent 1px),
    /* เส้นนอน (Horizontal) */
    linear-gradient(0deg, rgba(239, 72, 153, 0.5) 1px, transparent 1px);
  background-size: 40px 40px; /* ขนาดตาราง */

  /* บิดตารางให้เป็น 3D Perspective */
  transform: perspective(300px) rotateX(60deg);
  transform-origin: center top;

  /* ทำให้พื้นขยับได้ */
  animation: grid-move 5s linear infinite;
  z-index: -1; /* ส่งไปอยู่หลังสุด */

  /* ไล่สีให้จางหายไปที่ขอบฟ้า (Fading Horizon) */
  mask-image: linear-gradient(to bottom, transparent 0%, black 40%);
  -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 40%);
}

@keyframes grid-move {
  0% {
    background-position: 0px 0px;
  }
  100% {
    background-position: 0px 40px; /* ขยับลงให้ตรงกับขนาดตารางเพื่อ Loop เนียนๆ */
  }
}

/* ============================================================
   3. CRT SCANLINES (เส้นสแกนทีวีเก่า)
   ============================================================ */
body::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none; /* เพื่อให้คลิกทะลุได้ */
  z-index: 9998; /* อยู่เหนือ Background แต่อยู่ใต้ Modal */
}

/* ============================================================
   4. LAYOUT
   ============================================================ */
.app-layout {
  display: flex;
  height: 100vh;
  width: 100vw;
}

/* ============================================================
   5. SIDEBAR
   ============================================================ */
.sidebar {
  width: 250px;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  padding: 20px;
  z-index: 100;
  border-right: 2px solid #ec4899;
  border-top: 2px solid #ec4899;
  border-bottom: 2px solid #ec4899;
  box-shadow: 0 0 10px rgba(236, 72, 153, 0.2);
  animation: neon-flicker 4s infinite;
}

/* 5.1 Sidebar Animation */
@keyframes neon-flicker {
  0%,
  19%,
  21%,
  23%,
  25%,
  54%,
  56%,
  100% {
    border-color: #ec4899;
    box-shadow:
      0 0 10px rgba(236, 72, 153, 0.5),
      inset 0 0 20px rgba(236, 72, 153, 0.1);
  }
  20%,
  24%,
  55% {
    border-color: #555; /* ไฟดับจังหวะสั้นๆ */
    box-shadow: none;
  }
}

/* 5.2 Logo Area */
.logo-area {
  margin-bottom: 40px;
  text-align: center;
}
.logo-area h2 {
  font-family: "Press Start 2P";
  color: #eff107;
  font-size: 1.2rem;
  text-shadow: 2px 2px 0 #000;
}

/* 5.3 Menu Items */
.menu-item {
  padding: 15px 20px;
  margin-bottom: 10px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 1.1rem;
  font-weight: bold;
  color: #aaa;
  display: flex;
  align-items: center;
  gap: 10px;
}
.menu-item:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  transform: translateX(5px);
}
.menu-item.active {
  background: linear-gradient(90deg, #ec4899, #8b5cf6);
  color: white;
  box-shadow: 0 0 15px rgba(236, 72, 153, 0.5);
}

/* 5.4 Wallet Info */
.wallet-info {
  margin-top: auto;
  background: rgba(0, 0, 0, 0.5);
  padding: 15px;
  border-radius: 10px;
  border: 1px solid #333;
  font-size: 0.9em;
  text-align: center;
}
.balance-display {
  margin-top: 10px;
  font-size: 0.6rem;
  color: #4ade80;
  font-weight: bold;
  font-family: "Press Start 2P";
}

/* ============================================================
   6. MAIN CONTENT
   ============================================================ */
.main-content {
  flex: 1;
  padding: 30px;
  overflow-y: auto;
  position: relative;
}
.content-section {
  display: none;
  animation: fadeIn 0.5s ease;
  max-width: 900px;
  margin: 0 auto;
}
.content-section.active {
  display: block;
}
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================================
   7. FILTER BUTTONS
   ============================================================ */
.filter-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid #444;
  color: #ccc;
  padding: 8px 15px;
  border-radius: 20px;
  cursor: pointer;
  transition: 0.3s;
  font-size: 0.9rem;
}
.filter-btn:hover,
.filter-btn.active {
  background: #eff107;
  color: #000;
  border-color: #eff107;
  font-weight: bold;
}

/* ============================================================
   8. CARDS & GRID
   ============================================================ */
.card-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  perspective: 1000px; /* เตรียมพื้นที่ให้รองรับ 3D */
}

.card-box {
  width: 160px;
  height: 350px; /* เพิ่มความสูงนิดนึงเผื่อปุ่ม Link */
  border-radius: 15px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  transition:
    transform 0.1s ease-out,
    box-shadow 0.2s ease;
  background: #111;
  overflow: hidden;
  transform-style: preserve-3d;
}
.card-box:hover {
  transform: translateY(-10px) scale(1.05);
}

/* 8.1 Card Rarity Styles */
.Common {
  border: 2px solid #a1a1aa;
  box-shadow: 0 0 10px rgba(161, 161, 170, 0.2);
}
.Common h3 {
  color: #a1a1aa;
}
.Rare {
  border: 2px solid #06b6d4;
  box-shadow: 0 0 15px rgba(6, 182, 212, 0.5);
  background: linear-gradient(180deg, #111 0%, #062c33 100%);
}
.Rare h3 {
  color: #06b6d4;
}
.Legend {
  border: 3px solid #fbbf24;
  box-shadow: 0 0 25px rgba(251, 191, 36, 0.8);
  background: linear-gradient(180deg, #111 0%, #422a03 100%);
  animation: pulse-gold 2s infinite;
  position: relative;
  z-index: 1;
  border: none; /* ลบเส้นขอบเดิม */
  background: #111;
  border-radius: 16px; /* ปรับให้เข้ากับ Pseudo-element */
}
.Legend h3 {
  color: #fbbf24;
}

@keyframes pulse-gold {
  0% {
    box-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
  }
  50% {
    box-shadow: 0 0 30px rgba(251, 191, 36, 1);
    border-color: #fff;
  }
  100% {
    box-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
  }
}

/* 8.2 Card Animations & Effects */

/* ออร่าพิเศษสำหรับ Legend */
@keyframes legend-pulse {
  0% {
    box-shadow: 0 0 15px rgba(255, 77, 255, 0.3);
  }
  100% {
    box-shadow:
      0 0 30px rgba(255, 77, 255, 0.6),
      0 0 10px rgba(255, 255, 255, 0.4);
  }
}

/* แสงวิ่งผ่านการ์ด (Shine Effect) สำหรับ Legend */
.card-box.Legend::after {
  content: "";
  position: absolute;
  top: -150%;
  left: -50%;
  width: 20%;
  height: 300%;
  background: rgba(255, 255, 255, 0.2);
  transform: rotate(45deg);
  transition: none;
  animation: shine-sweep 4s infinite;
}

@keyframes shine-sweep {
  0% {
    left: -50%;
  }
  20% {
    left: 150%;
  }
  100% {
    left: 150%;
  }
}

/* เอฟเฟกต์ระยิบระยับ (Particles แบบ CSS) สำหรับ Legend */
.card-box.Legend::before {
  content: "";
  position: absolute;
  inset: -3px; /* ขยายออกมารอบตัวการ์ด */
  z-index: -1;
  background: linear-gradient(
    90deg,
    #ff0000,
    #ff7300,
    #fffb00,
    #48ff00,
    #00ffd5,
    #002bff,
    #7a00ff,
    #ff00c8,
    #ff0000
  );
  background-size: 400%;
  border-radius: 18px;
  animation: glowing-border 20s linear infinite;
}

@keyframes glowing-border {
  0% {
    background-position: 0 0;
  }
  50% {
    background-position: 400% 0;
  }
  100% {
    background-position: 0 0;
  }
}

@keyframes sparkle-float {
  0% {
    opacity: 0;
    transform: translateY(0);
  }
  50% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
    transform: translateY(-20px);
  }
}

/* 8.3 Card Image Container */
.card-image-container {
  width: 120px; /* ปรับขนาดความกว้างตามใจชอบ */
  height: 160px; /* ปรับขนาดความสูงตามใจชอบ */
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  cursor: zoom-in;
}

.card-image-container img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* ให้รูปเต็มกรอบโดยไม่เสียสัดส่วน */
  transition: transform 0.3s ease;
}

/* เอฟเฟกต์ถ้ารูปเป็นการ์ด Legend ให้มีแสงฟุ้งๆ */
.card-box.Legend .card-image-container {
  border: 2px solid #fbbf24;
  box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
  animation: glow 2s infinite alternate;
}

@keyframes glow {
  from {
    box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
  }
  to {
    box-shadow: 0 0 25px rgba(251, 191, 36, 0.8);
  }
}

/* 8.4 Card Link & ID */
.card-link {
  margin-top: 10px;
  font-size: 0.7rem;
  color: #666;
  text-decoration: none;
  border: 1px solid #333;
  padding: 2px 8px;
  border-radius: 4px;
  transition: 0.2s;
}
.card-link:hover {
  background: #333;
  color: #fff;
}
.card-id {
  font-size: 0.8em;
  opacity: 0.7;
  font-family: monospace;
  margin-top: 5px;
}

/* ============================================================
   9. BUTTONS (Common UI)
   ============================================================ */

/* 9.1 Base Button */
.container-box {
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 40px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
  text-align: center;
}
.btn-group {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
  margin: 30px 0;
}
button {
  font-family: "Press Start 2P", cursive;
  font-size: 12px;
  padding: 15px 25px;
  border: none;
  cursor: pointer;
  transition: all 0.3s;
  border-radius: 8px;
  text-transform: uppercase;
  box-shadow: 0 5px 0 #000;
  position: relative;
  top: 0;
}
button:active {
  top: 5px;
  box-shadow: 0 0 0 #000;
}
button:hover {
  filter: brightness(1.2);
}
.page-title {
  font-family: "Press Start 2P";
  color: #eff107;
  margin-bottom: 30px;
  font-size: 1.5rem;
  border-bottom: 2px solid #333;
  padding-bottom: 20px;
}

/* 9.2 Button Variants */
.btn-connect {
  background: #3b82f6;
  color: white;
}
.btn-approve {
  background: #f59e0b;
  color: black;
}
.btn-spin {
  background: radial-gradient(circle at 30% 30%, #ff79c6, #ec4899);
  color: white;
  font-size: 16px;
  padding: 20px 40px;
  border-radius: 50px; /* ทำให้กลมมนเหมือนปุ่มตู้เกม */
  border: 4px solid #bd1e59; /* ขอบปุ่มด้านล่าง */
  box-shadow:
    0 10px 0 #8b1643,
    /* เงาความหนาปุ่ม */ 0 15px 20px rgba(0, 0, 0, 0.4),
    /* เงาตกกระทบพื้น */ inset 0 5px 10px rgba(255, 255, 255, 0.4); /* แสงสะท้อนด้านบน */
  transition: all 0.1s;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
}

/* --- BURN BUTTON (ปุ่มเล็กในการ์ด) --- */
.btn-burn-card {
  background: #ef4444; /* สีแดง */
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 0.7rem;
  margin-top: 8px;
  cursor: pointer;
  font-family: "Press Start 2P";
  transition: 0.2s;
  width: 80%;
}
.btn-burn-card:hover {
  background: #b91c1c;
  box-shadow: 0 0 10px #ef4444;
}
.btn-cancel {
  background: #555;
  color: white;
}
.btn-confirm-burn {
  background: #ef4444;
  color: white;
  animation: pulse-red 1.5s infinite;
}
.btn-confirm-reveal {
  margin-top: 10px;
  padding: 15px 40px;
  background: #eff107;
  color: #000;
  border: none;
  font-family: "Press Start 2P";
  cursor: pointer;
  clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
}
.btn-secondary {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 5px;
  cursor: pointer;
}
.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* 9.3 Button Effects (Click, Shine, Shake) */
.btn-connect,
.btn-approve,
.btn-spin,
.btn-confirm-reveal {
  transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative;
  overflow: hidden;
}

.btn-connect:active,
.btn-approve:active {
  transform: scale(0.92); /* ปุ่มจะยุบลงเล็กน้อยเวลาคลิก */
  filter: brightness(1.2);
}

.btn-spin:active {
  transform: translateY(10px); /* กดแล้วยุบลง */
  box-shadow:
    0 0 0 #8b1643,
    0 5px 10px rgba(0, 0, 0, 0.4),
    inset 0 5px 20px rgba(0, 0, 0, 0.6); /* เงาด้านในเข้มขึ้นเมื่อถูกกด */
}

/* Shine Effect (แสงวิ่งผ่านปุ่มเป็นระยะ) */
@keyframes shine {
  0% {
    left: -100%;
  }
  20% {
    left: 100%;
  }
  100% {
    left: 100%;
  }
}

.btn-spin::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255, 255, 255, 0.3),
    transparent
  );
  transform: skewX(-25deg);
  animation: shine 3s infinite;
}

/* สั่นเบาๆ เมื่อ Hover ที่ปุ่ม Spin */
.btn-spin:hover {
  animation: gentle-shake 0.5s infinite;
}

@keyframes gentle-shake {
  0% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(1deg);
  }
  75% {
    transform: rotate(-1deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

.screen-shake {
  animation: shake-ui 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

@keyframes shake-ui {
  10%,
  90% {
    transform: translate3d(-1px, 0, 0);
  }
  20%,
  80% {
    transform: translate3d(2px, 0, 0);
  }
  30%,
  50%,
  70% {
    transform: translate3d(-4px, 0, 0);
  }
  40%,
  60% {
    transform: translate3d(4px, 0, 0);
  }
}

/* Animation สำหรับปุ่มที่ต้องกด */
.pulse-animation {
  animation: pulse-yellow 2s infinite;
  box-shadow: 0 0 0 0 rgba(239, 241, 7, 0.7);
  border: 2px solid #eff107 !important;
}

@keyframes pulse-yellow {
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(239, 241, 7, 0.7);
  }
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 10px rgba(239, 241, 7, 0);
  }
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(239, 241, 7, 0);
  }
}

/* 9.4 Disabled State */
button:disabled {
  filter: grayscale(1);
  transform: none !important;
}

/* สไตล์ปุ่ม Burn เมื่อถูก Disabled (เพราะติดล็อค) */
.btn-burn-card:disabled {
  background: #2c2c2c !important;
  border-color: #444 !important;
  color: #666 !important;
  cursor: not-allowed !important;
  filter: grayscale(1);
  opacity: 0.6;
  transform: none !important; /* ปิด animation ตอน hover */
}

/* ============================================================
   10. LOADING OVERLAY (Pacman Loader)
   ============================================================ */
#loadingOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  z-index: 9999;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(5px);
}
.loader-wrapper {
  position: relative;
  width: 120px;
  height: 60px;
}
.loader-wrapper .packman::before {
  content: "";
  position: absolute;
  width: 50px;
  height: 25px;
  background-color: #eff107;
  border-radius: 100px 100px 0 0;
  top: 50%;
  left: 0;
  margin-top: -25px;
  animation: pac-top 0.5s linear infinite;
  transform-origin: center bottom;
}
.loader-wrapper .packman::after {
  content: "";
  position: absolute;
  width: 50px;
  height: 25px;
  background-color: #eff107;
  border-radius: 0 0 100px 100px;
  top: 50%;
  left: 0;
  margin-top: 0px;
  animation: pac-bot 0.5s linear infinite;
  transform-origin: center top;
}
@keyframes pac-top {
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(-35deg);
  }
  100% {
    transform: rotate(0deg);
  }
}
@keyframes pac-bot {
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(35deg);
  }
  100% {
    transform: rotate(0deg);
  }
}
.dots {
  position: absolute;
  top: 50%;
  left: 55px;
  width: 100%;
  height: 10px;
  margin-top: -5px;
}
.dots .dot {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #fff;
}
.dots .dot:nth-child(1) {
  left: 90px;
  animation: dot-stage1 0.5s infinite;
}
.dots .dot:nth-child(2) {
  left: 60px;
  animation: dot-stage1 0.5s infinite;
}
.dots .dot:nth-child(3) {
  left: 30px;
  animation: dot-stage1 0.5s infinite;
}
.dots .dot:nth-child(4) {
  left: 0px;
  animation: dot-stage2 0.5s infinite;
}
@keyframes dot-stage1 {
  0% {
    transform: translate(0, 0);
  }
  100% {
    transform: translate(-30px, 0);
  }
}
@keyframes dot-stage2 {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  5%,
  100% {
    transform: scale(0);
    opacity: 0;
  }
}
.loading-text {
  margin-top: 30px;
  font-family: "Press Start 2P";
  color: #eff107;
  font-size: 1rem;
  animation: blink 1s infinite;
  letter-spacing: 2px;
}
@keyframes blink {
  50% {
    opacity: 0.5;
  }
}

/* ============================================================
   11. MODAL (Burn Confirm Dialog)
   ============================================================ */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(5px);
  display: none; /* ซ่อนไว้ก่อน */
  justify-content: center;
  align-items: center;
  z-index: 2000;
  animation: fadeIn 0.2s;
}

.modal-box {
  background: #1f1f1f;
  border: 1px solid #ef4444;
  padding: 30px;
  border-radius: 15px;
  text-align: center;
  box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
  max-width: 400px;
  width: 90%;
}

@keyframes pulse-red {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
}

/* ============================================================
   12. LOCK BUTTON
   ============================================================ */
.btn-lock {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  padding: 6px 8px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.btn-lock:hover {
  transform: scale(1.1);
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.4);
}

.btn-lock:active {
  transform: scale(0.9);
}

/* สถานะ Locked */
.btn-lock.locked {
  background: rgba(239, 68, 68, 0.2); /* สีแดงจางๆ */
  border-color: rgba(239, 68, 68, 0.5);
  box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
}

/* สถานะ Unlocked */
.btn-lock.unlocked {
  background: rgba(74, 222, 128, 0.1); /* สีเขียวจางๆ */
  border-color: rgba(74, 222, 128, 0.4);
}

/* ============================================================
   13. CARD PREVIEW MODAL
   ============================================================ */
.preview-container {
  position: relative;
  max-width: 90%;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#previewImage {
  width: 100%;
  max-height: 80vh;
  object-fit: contain;
  border-radius: 15px;
  box-shadow:
    0 0 30px rgba(0, 0, 0, 0.8),
    0 0 10px rgba(239, 72, 153, 0.5);
  border: 2px solid rgba(255, 255, 255, 0.1);
}

.close-preview {
  position: absolute;
  top: -40px;
  right: 0;
  color: white;
  font-size: 30px;
  cursor: pointer;
  font-family: serif;
}

.preview-info {
  margin-top: 15px;
  font-family: "Press Start 2P";
  font-size: 0.8rem;
  color: #eff107;
}

/* ============================================================
   14. GACHA REVEAL EFFECT
   ============================================================ */
.reveal-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.95);
  z-index: 2000;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.reveal-content {
  text-align: center;
  animation: zoomIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

#revealRarityText {
  font-family: "Press Start 2P";
  font-size: 1.5rem;
  margin-bottom: 20px;
  text-shadow: 0 0 10px #fff;
}

#revealCardContainer img {
  width: 280px;
  border-radius: 20px;
  box-shadow: 0 0 50px rgba(255, 255, 255, 0.3);
  border: 3px solid #fff;
}

.reveal-light {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100px;
  height: 100px;
  background: white;
  filter: blur(50px);
  border-radius: 50%;
  z-index: -1;
  animation: pulseLight 2s infinite;
}

@keyframes zoomIn {
  from {
    transform: scale(0);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes pulseLight {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.5;
  }
  50% {
    transform: translate(-50%, -50%) scale(5);
    opacity: 0.2;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.5;
  }
}

/* ============================================================
   15. COLLECTION PROGRESS
   ============================================================ */
.collection-header {
  background: rgba(255, 255, 255, 0.05);
  padding: 20px;
  border-radius: 15px;
  margin-bottom: 25px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.collection-header h2 {
  font-family: "Press Start 2P";
  font-size: 1rem;
  margin-bottom: 20px;
  color: #eff107;
}

.progress-stats {
  margin-bottom: 15px;
}

.stat-item {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  margin-bottom: 8px;
  font-weight: bold;
}

.progress-container-main {
  width: 100%;
  height: 12px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 6px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ec4899, #eff107);
  box-shadow: 0 0 10px rgba(236, 72, 153, 0.5);
  transition: width 1s ease-in-out;
}

.rarity-summary {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.summary-box {
  flex: 1;
  min-width: 120px;
  padding: 10px;
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: bold;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.summary-box.common {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}
.summary-box.rare {
  background: rgba(59, 130, 246, 0.2);
  color: #60a5fa;
}
.summary-box.legend {
  background: rgba(255, 204, 0, 0.2);
  color: #fffb00;
}

/* ============================================================
   16. SEARCH & SORT UI
   ============================================================ */
.filter-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  align-items: center;
  background: rgba(0, 0, 0, 0.4);
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 20px;
}

.search-box {
  position: relative;
  flex: 1;
  min-width: 200px;
}

.search-box i {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: #666;
}

#cardSearchInput {
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 10px 10px 10px 35px;
  border-radius: 8px;
  color: white;
  font-family: "Rajdhani", sans-serif;
  outline: none;
  transition: 0.3s;
}

#cardSearchInput:focus {
  border-color: #eff107;
  background: rgba(255, 255, 255, 0.1);
}

.sort-dropdown {
  background: #222;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 8px 12px;
  border-radius: 8px;
  font-family: "Rajdhani", sans-serif;
  cursor: pointer;
  outline: none;
}

.sort-dropdown:focus {
  border-color: #eff107;
}

.filter-options {
  display: flex;
  gap: 8px;
}

/* ============================================================
   17. HISTORY SYSTEM
   ============================================================ */
.history-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 60vh;
  overflow-y: auto;
  padding-right: 10px;
}

.history-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 20px;
  background: rgba(255, 255, 255, 0.05);
  border-left: 4px solid #666;
  border-radius: 4px;
  animation: slideIn 0.3s ease-out;
}

.history-item.sumon {
  border-left-color: #eff107;
} /* สีเหลืองสุ่ม */
.history-item.burn {
  border-left-color: #ef4444;
} /* สีแดงเผา */

.history-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.history-action {
  font-weight: bold;
  font-size: 0.9em;
  text-transform: uppercase;
}

.history-details {
  font-size: 0.8em;
  color: #aaa;
}

.history-time {
  font-size: 0.75em;
  color: #666;
  font-family: monospace;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ตกแต่ง Scrollbar สำหรับ History */
.history-list::-webkit-scrollbar {
  width: 4px;
}
.history-list::-webkit-scrollbar-thumb {
  background: #333;
  border-radius: 10px;
}

/* ============================================================
   18. QUICK INVENTORY SUMMARY
   ============================================================ */
.quick-inventory-summary {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  padding: 10px 15px;
  margin: 15px auto;
  max-width: 320px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.summary-item .label {
  color: #888;
  font-size: 0.85rem;
  display: block;
}

.summary-item .value {
  color: #fff;
  font-size: 1.2rem;
  font-weight: bold;
  font-family: "Orbitron", sans-serif; /* หรือ font เกมที่คุณใช้ */
}

.summary-rarities {
  display: flex;
  gap: 8px;
}

.rarity-badge {
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: bold;
  min-width: 30px;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.rarity-badge.common {
  background: #444;
  color: #fff;
}
.rarity-badge.rare {
  background: #0066ff;
  color: #fff;
  box-shadow: 0 0 5px rgba(0, 102, 255, 0.5);
}
.rarity-badge.legend {
  background: #ffa600;
  color: #fff;
  box-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
}

/* ============================================================
   19. REVEAL DETAILS & ACTIONS
   ============================================================ */
.reveal-details {
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 10px 20px;
  margin: 15px 30px;
  width: 100%;
  max-width: 300px;
}

.detail-row {
  display: flex;
  justify-content: space-between;
  margin: 5px;
  font-family: "Rajdhani", sans-serif;
  font-size: 0.85rem;
}

.detail-row .label {
  color: #888;
}
.detail-row .value {
  color: #fff;
  font-weight: bold;
}

.reveal-actions {
  display: flex;
  gap: 10px;
  width: 100%;
  max-width: 350px;
}

.reveal-actions button {
  flex: 1;
  padding: 12px;
  font-size: 0.8rem;
  font-weight: bold;
}

/* ============================================================
   20. STARS BACKGROUND
   ============================================================ */
.stars,
.stars2,
.stars3 {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: -2; /* อยู่หลัง Grid Floor */
  border-radius: 50%;
  background: transparent;
  animation: fly-stars 50s linear infinite;
}

/* ดาวชุดเล็ก (เยอะสุด) */
.stars {
  width: 1px;
  height: 1px;
  box-shadow:
    10vw 10vh #fff,
    20vw 80vh #fff,
    50vw 50vh #fff,
    80vw 10vh #fff,
    90vw 90vh #fff,
    15vw 45vh #fff,
    35vw 15vh #fff,
    65vw 35vh #fff,
    85vw 65vh #fff,
    5vw 95vh #fff,
    40vw 60vh #fff,
    70vw 20vh #fff,
    10vw 30vh #fff,
    95vw 40vh #fff,
    25vw 75vh #fff;
}

/* ดาวชุดกลาง */
.stars2 {
  width: 2px;
  height: 2px;
  box-shadow:
    30vw 20vh #ffffffaa,
    60vw 80vh #ffffffaa,
    10vw 50vh #ffffffaa,
    80vw 30vh #ffffffaa,
    50vw 90vh #ffffffaa,
    90vw 10vh #ffffffaa;
  animation-duration: 100s; /* วิ่งช้ากว่าให้ดูมีระยะลึก */
}

/* ดาวชุดใหญ่ (ใกล้ตา) */
.stars3 {
  width: 3px;
  height: 3px;
  box-shadow:
    40vw 40vh #ffffff88,
    70vw 10vh #ffffff88,
    20vw 90vh #ffffff88;
  animation-duration: 150s;
}

@keyframes fly-stars {
  from {
    transform: translateY(0px);
  }
  to {
    transform: translateY(-2000px);
  } /* เลื่อนขึ้นไปเรื่อยๆ */
}

/* ============================================================
   21. TICKER (Marquee Bar)
   ============================================================ */
.ticker-wrap {
  position: fixed;
  bottom: 0;
  left: 250px; /* เว้นระยะให้ Sidebar */
  width: calc(100% - 250px);
  height: 30px;
  background: rgba(0, 0, 0, 0.9);
  border-top: 1px solid #eff107; /* เส้นสีเหลืองด้านบน */
  overflow: hidden;
  white-space: nowrap;
  z-index: 100;
  display: flex;
  align-items: center;
}

.ticker {
  display: inline-block;
  animation: marquee 20s linear infinite;
  padding-left: 100%; /* เริ่มวิ่งจากขวาสุด */
}

.ticker-item {
  display: inline-block;
  padding: 0 2rem;
  font-size: 0.8rem;
  color: #fff;
  font-family: "Press Start 2P", monospace; /* ฟอนต์เกม 8-bit */
  text-transform: uppercase;
}

@keyframes marquee {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(-100%, 0, 0);
  }
}

/* ============================================================
   22. SCROLLBAR
   ============================================================ */
::-webkit-scrollbar {
  width: 10px;
}
::-webkit-scrollbar-track {
  background: #0b0a14;
  border-left: 1px solid rgba(255, 255, 255, 0.1);
}
::-webkit-scrollbar-thumb {
  background: #eff107; /* สีเหลืองนีออน */
  border-radius: 0;
  border: 2px solid #0b0a14; /* ตัดขอบให้ดูเป็น block */
}
::-webkit-scrollbar-thumb:hover {
  background: #ec4899; /* เปลี่ยนเป็นสีชมพูเมื่อเอาเมาส์ชี้ */
}

/* ============================================================
   23. RESPONSIVE (Mobile)
   ============================================================ */
@media (max-width: 768px) {
  .app-layout {
    flex-direction: column;
  }
  .sidebar {
    width: 100%;
    height: auto;
    flex-direction: row;
    justify-content: space-around;
    padding: 10px;
    order: 2;
    border-right: none;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }
  .logo-area,
  .wallet-info {
    display: none;
  }
  .menu-item {
    margin: 0;
    flex: 1;
    justify-content: center;
    font-size: 0.9rem;
    flex-direction: column;
    gap: 5px;
  }
  .main-content {
    order: 1;
    padding: 15px;
  }
}

/* ============================================================
   BATTLE MODE UI (Pokemon Retro Style)
   ============================================================ */
.battle-header {
  text-align: center;
  margin-bottom: 20px;
}
.battle-subtitle {
  color: #a1a1aa;
  font-size: 0.9em;
  font-family: "Press Start 2P", monospace;
}
.battle-subtitle .highlight {
  color: #ef4444;
}

.pokemon-theme {
  max-width: 800px;
  margin: 0 auto;
  font-family: "Press Start 2P", monospace;
}

/* --- Battle Screen (ฉากต่อสู้) --- */
/* --- Battle Screen (ฉากต่อสู้) --- */
.battle-screen {
  position: relative;
  height: 380px;
  border: 4px solid #4a4a4a;
  border-radius: 8px 8px 0 0;
  overflow: hidden;
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);

  /* สร้างฉากหลังโปเกมอนด้วย CSS (ก้อนเมฆ แนวป่า ทุ่งหญ้า ท้องฟ้า) */
  background:
    /* 1. ก้อนเมฆ (หน้าสุดลอยฟ้า) */
    radial-gradient(circle 15px at 75% 20%, #ffffff 99%, transparent 100%),
    radial-gradient(circle 25px at 80% 25%, #ffffff 99%, transparent 100%),
    radial-gradient(circle 20px at 86% 22%, #ffffff 99%, transparent 100%),
    radial-gradient(circle 20px at 20% 30%, #ffffff 99%, transparent 100%),
    radial-gradient(circle 30px at 27% 33%, #ffffff 99%, transparent 100%),
    radial-gradient(circle 25px at 35% 30%, #ffffff 99%, transparent 100%),
    /* 2. พื้นหญ้า (ทับขอบล่างของต้นไม้เพื่อตัดขอบให้ขนานเนียนกับเส้นขอบฟ้า) */
    linear-gradient(to bottom, transparent 55%, #dcedc8 55%, #8bc34a 100%),
    /* 3. ฐานต้นไม้ตรงเส้นขอบฟ้า */
    linear-gradient(
        to bottom,
        transparent 52%,
        #2e7d32 52%,
        #1b5e20 55%,
        transparent 55%
      ),
    /* 4. พุ่มไม้/ภูเขา (ลอยเด่นขึ้นไปบนฟ้า) */
    radial-gradient(ellipse 80px 40px at 20% 55%, #4caf50 99%, transparent 100%),
    radial-gradient(
      ellipse 100px 50px at 50% 55%,
      #388e3c 99%,
      transparent 100%
    ),
    radial-gradient(
      ellipse 90px 45px at 85% 55%,
      #4caf50 99%,
      transparent 100%
    ),
    /* 5. ท้องฟ้า (หลังสุด) */
    linear-gradient(to bottom, #4fc3f7 0%, #b3e5fc 55%, #b3e5fc 100%);
}

/* เงาฐานยืน (Ground) */
.ground-shadow {
  position: absolute;
  background: #b7cebc;
  border-radius: 50%;
  z-index: 1;
}
.boss-shadow {
  width: 200px;
  height: 60px;
  top: 120px;
  right: -25px;
}
.player-shadow {
  width: 250px;
  height: 80px;
  bottom: -50px;
  left: -50px;
}

/* ตำแหน่งตัวละคร */
.poke-sprite {
  position: absolute;
  z-index: 2;
}
.boss-sprite-area {
  top: 80px;
  right: 80px;
}
.boss-avatar {
  height: 140px;
  position: relative;
  z-index: 3;
}
.floating {
  animation: floatUpDown 2s ease-in-out infinite;
}

.player-sprite-area {
  bottom: 50px;
  left: 80px;
}
.player-deck-sprite {
  position: relative;
  z-index: 3;
  display: flex;
  gap: 5px;
  transform: scale(1.3); /* ย่อขนาดการ์ดลงให้พอดีฐาน */
  transform-origin: bottom left;
}
.player-deck-sprite .empty-state {
  background: rgba(0, 0, 0, 0.5);
  padding: 20px;
  border-radius: 10px;
  color: white;
  font-size: 0.8rem;
  border: 2px dashed #fff;
}

/* --- ป้ายสถานะ (Status Boxes) --- */
.poke-status {
  position: absolute;
  background: #ffffe8;
  border: 3px solid #4a4a4a;
  padding: 15px;
  border-radius: 8px 0 8px 0; /* มุมเหลี่ยมแบบคลาสสิก */
  box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.2);
  z-index: 10;
}
.boss-status {
  bottom: 20px;
  right: 20px;
  width: 250px;
}
.player-status {
  top: 20px;
  left: 20px;
  width: 280px;
}

.status-header {
  display: flex;
  justify-content: space-between;
  color: #333;
  font-size: 0.9rem;
  margin-bottom: 8px;
  font-weight: bold;
}
.poke-level {
  font-size: 0.8rem;
}

.hp-bar-container {
  display: flex;
  align-items: center;
  background: #4a4a4a;
  padding: 2px 5px;
  border-radius: 10px;
  margin-bottom: 5px;
}
.hp-label {
  color: #ffde00;
  font-size: 0.6rem;
  margin-right: 5px;
}
.hp-bar-bg {
  flex-grow: 1;
  background: #eee;
  height: 8px;
  border-radius: 4px;
  border: 1px solid #333;
  overflow: hidden;
}
.hp-fill {
  height: 100%;
  width: 100%; /* เริ่มต้นเต็มหลอด */
  transition: width 0.5s ease;
}
.hp-boss {
  background: #ff5959; /* เลือดบอสสีแดง */
}
.hp-player {
  background: #4ade80; /* เลือดผู้เล่นสีเขียว */
}

.power-numbers {
  text-align: right;
  color: #333;
  font-size: 0.8rem;
  margin-top: 5px;
}

/* --- UI ด้านล่าง (Dialog & Menu) --- */
.battle-bottom-ui {
  display: flex;
  height: 120px;
  background: #4a4a4a;
  padding: 5px;
  border-radius: 0 0 8px 8px;
}

.poke-dialog-box {
  flex-grow: 1;
  background: #fffcf0;
  border: 4px solid #787878;
  border-radius: 4px;
  padding: 15px;
  margin-right: 5px;
  box-shadow: inset 0 0 0 2px #4a4a4a;
}
.dialog-text {
  color: #333;
  font-size: 0.9rem;
  line-height: 1.8;
}

.poke-action-menu {
  width: 200px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.poke-action-menu button {
  flex: 1;
  background: #fffcf0;
  border: 4px solid #787878;
  border-radius: 4px;
  font-family: "Press Start 2P", monospace;
  font-size: 0.9rem;
  color: #333;
  cursor: pointer;
  box-shadow: inset 0 0 0 2px #4a4a4a;
  transition: all 0.1s;
}
.poke-action-menu button:hover {
  background: #e0e0e0;
  transform: scale(0.98);
}
.btn-poke-fight:hover {
  color: #ef4444 !important;
}

/* Animations */
@keyframes floatUpDown {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .battle-screen {
    height: 450px;
  }
  .boss-sprite-area {
    right: 20px;
  }
  .player-sprite-area {
    left: 10px;
  }
  .boss-status,
  .player-status {
    width: 220px;
    padding: 10px;
  }
  .battle-bottom-ui {
    flex-direction: column;
    height: auto;
  }
  .poke-dialog-box {
    margin-right: 0;
    margin-bottom: 5px;
    min-height: 80px;
  }
  .poke-action-menu {
    width: 100%;
    flex-direction: row;
    height: 60px;
  }
}

/* เอฟเฟกต์ตอนโดนโจมตี */
@keyframes damageShake {
  0% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(-10px);
  }
  40% {
    transform: translateX(10px);
  }
  60% {
    transform: translateX(-10px);
  }
  80% {
    transform: translateX(10px);
  }
  100% {
    transform: translateX(0);
  }
}
.taking-damage {
  animation: damageShake 0.4s !important;
  filter: brightness(0.5) sepia(1) hue-rotate(-50deg) saturate(5) !important;
}
